import{d as N,h as i,X as h,r as s,o as b,f as D,w as t,b as a,a1 as q,l as E,ax as k,ay as c,E as f,az as x}from"./index.afa5927e.js";const j=E("\u53D6\u6D88"),S=E("\u6D4B\u8BD5\u6570\u4ED3\u8FDE\u901A\u6027"),T=E("\u786E\u5B9A"),O=N({__name:"add-or-update",emits:["refreshDataList"],setup(I,{expose:g,emit:F}){const n=i(!1),m=i(),u=h({name:"",engName:"",dbType:"",dbName:"",dbIp:"",dbPort:"",dbSchema:"",dbUrl:"",dbUsername:"",dbPassword:"",newPassword:"******",description:"",status:"",dutyPerson:""}),A=r=>{n.value=!0,u.id="",u.newPassword="******",m.value&&m.value.resetFields(),r&&B(r)},w=r=>{u.dbPassword=r},B=r=>{k(r).then(e=>{Object.assign(u,e.data)})},C=i({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],engName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbIp:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbPort:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbSchema:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbUsername:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],dbPassword:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=()=>{m.value.validate(r=>{if(!r)return!1;c(u).then(()=>{f.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{n.value=!1,F("refreshDataList")}})})})},U=()=>{x(u).then(()=>{f.success({message:"\u6D4B\u8BD5\u6210\u529F"})})};return g({init:A}),(r,e)=>{const d=s("el-input"),o=s("el-form-item"),y=s("fast-select"),P=s("fast-radio-group"),_=s("el-form"),p=s("el-button"),v=s("el-dialog");return b(),D(v,{modelValue:n.value,"onUpdate:modelValue":e[18]||(e[18]=l=>n.value=l),title:u.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:t(()=>[a(p,{onClick:e[15]||(e[15]=l=>n.value=!1)},{default:t(()=>[j]),_:1}),a(p,{type:"primary",onClick:e[16]||(e[16]=l=>U())},{default:t(()=>[S]),_:1}),a(p,{type:"success",onClick:e[17]||(e[17]=l=>V())},{default:t(()=>[T]),_:1})]),default:t(()=>[a(_,{ref_key:"dataFormRef",ref:m,model:u,rules:C.value,"label-width":"100px",onKeyup:e[14]||(e[14]=q(l=>V(),["enter"]))},{default:t(()=>[a(o,{label:"\u9879\u76EE\u540D\u79F0",prop:"name","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.name,"onUpdate:modelValue":e[0]||(e[0]=l=>u.name=l),placeholder:"\u9879\u76EE\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u82F1\u6587\u540D\u79F0",prop:"engName","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.engName,"onUpdate:modelValue":e[1]||(e[1]=l=>u.engName=l),placeholder:"\u82F1\u6587\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3\u7C7B\u578B",prop:"dbType","label-width":"auto"},{default:t(()=>[a(y,{modelValue:u.dbType,"onUpdate:modelValue":e[2]||(e[2]=l=>u.dbType=l),"dict-type":"data_house_type",placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3ip",prop:"dbIp","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbIp,"onUpdate:modelValue":e[3]||(e[3]=l=>u.dbIp=l),placeholder:"\u6570\u4ED3ip"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3port",prop:"dbPort","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbPort,"onUpdate:modelValue":e[4]||(e[4]=l=>u.dbPort=l),placeholder:"\u6570\u4ED3port"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3\u5E93\u540D",prop:"dbName","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbName,"onUpdate:modelValue":e[5]||(e[5]=l=>u.dbName=l),placeholder:"\u6570\u4ED3\u5E93\u540D"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3schema",prop:"dbSchema","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbSchema,"onUpdate:modelValue":e[6]||(e[6]=l=>u.dbSchema=l),placeholder:"\u6570\u4ED3schema"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3\u7528\u6237\u540D",prop:"dbUsername","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbUsername,"onUpdate:modelValue":e[7]||(e[7]=l=>u.dbUsername=l),placeholder:"\u6570\u4ED3\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u6570\u4ED3\u5BC6\u7801",prop:"dbPassword","label-width":"auto"},{default:t(()=>[u.id?(b(),D(d,{key:1,modelValue:u.newPassword,"onUpdate:modelValue":e[9]||(e[9]=l=>u.newPassword=l),placeholder:"\u5BC6\u7801",onChange:w},null,8,["modelValue"])):(b(),D(d,{key:0,modelValue:u.dbPassword,"onUpdate:modelValue":e[8]||(e[8]=l=>u.dbPassword=l),placeholder:"\u6570\u4ED3\u5BC6\u7801"},null,8,["modelValue"]))]),_:1}),a(o,{label:"\u6570\u4ED3jdbc\u8FDE\u63A5\u4E32",prop:"dbUrl","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dbUrl,"onUpdate:modelValue":e[10]||(e[10]=l=>u.dbUrl=l),placeholder:"\u82E5\u4E0D\u586B\u5199\u540E\u53F0\u81EA\u52A8\u751F\u6210"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u63CF\u8FF0",prop:"description","label-width":"auto"},{default:t(()=>[a(d,{type:"textarea",modelValue:u.description,"onUpdate:modelValue":e[11]||(e[11]=l=>u.description=l)},null,8,["modelValue"])]),_:1}),a(o,{label:"\u72B6\u6001",prop:"status","label-width":"auto"},{default:t(()=>[a(P,{modelValue:u.status,"onUpdate:modelValue":e[12]||(e[12]=l=>u.status=l),"dict-type":"project_status"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u8D1F\u8D23\u4EBA",prop:"dutyPerson","label-width":"auto"},{default:t(()=>[a(d,{modelValue:u.dutyPerson,"onUpdate:modelValue":e[13]||(e[13]=l=>u.dutyPerson=l),placeholder:"\u8D1F\u8D23\u4EBA"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{O as _};
