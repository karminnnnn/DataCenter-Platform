import{d as $,h as p,X as R,ai as S,r as u,aj as A,o as f,f as h,w as o,b as e,k as r,a1 as H,a6 as I,G as j,a as K,l as m}from"./index.afa5927e.js";import{_ as G}from"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";import{_ as P}from"./task-column.vue_vue_type_script_setup_true_lang.a19734c7.js";const X=m("\u67E5\u8BE2"),J=m("\u5220\u9664"),O=m("\u5220\u9664"),Q=m("\u8BE6\u60C5"),W=m("\u9519\u8BEF\u65E5\u5FD7"),Z={style:{padding:"15px"}},oe=$({__name:"task-table",setup(ee,{expose:w}){const c=p(!1),a=R({createdIsNeed:!1,dataListUrl:"/data-governance/quality-task-table/page",deleteUrl:"/data-governance/quality-task-table",queryForm:{qualityTaskId:"",tableName:"",status:"",startTime:"",endTime:""}}),V=i=>{c.value=!0,a.queryForm.qualityTaskId=i,g()},_=p(!1),C=p(),B=i=>{_.value=!0,setTimeout(()=>{C.value.setEditorValue(i)},500)},y=p(),D=i=>{y.value.init(i)};w({init:V});const{getDataList:g,selectionChangeHandle:q,sizeChangeHandle:T,currentChangeHandle:Y,deleteBatchHandle:F}=S(a);return(i,l)=>{const E=u("el-input"),s=u("el-form-item"),L=u("fast-select"),b=u("el-date-picker"),d=u("el-button"),z=u("el-form"),n=u("el-table-column"),N=u("fast-table-column"),x=u("el-table"),M=u("el-pagination"),v=u("el-dialog"),U=A("loading");return f(),h(v,{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=t=>c.value=t),title:"\u68C0\u6D4B\u8BB0\u5F55",width:"85%"},{default:o(()=>[e(z,{inline:!0,model:a.queryForm,onKeyup:l[6]||(l[6]=H(t=>r(g)(),["enter"]))},{default:o(()=>[e(s,null,{default:o(()=>[e(E,{modelValue:a.queryForm.tableName,"onUpdate:modelValue":l[0]||(l[0]=t=>a.queryForm.tableName=t),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(L,{modelValue:a.queryForm.status,"onUpdate:modelValue":l[1]||(l[1]=t=>a.queryForm.status=t),"dict-type":"run_status",placeholder:"\u72B6\u6001",clearable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(b,{modelValue:a.queryForm.startTime,"onUpdate:modelValue":l[2]||(l[2]=t=>a.queryForm.startTime=t),type:"datetime",placeholder:"\u5F00\u59CB\u65F6\u95F4",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(b,{modelValue:a.queryForm.endTime,"onUpdate:modelValue":l[3]||(l[3]=t=>a.queryForm.endTime=t),type:"datetime",placeholder:"\u7ED3\u675F\u65F6\u95F4",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(d,{onClick:l[4]||(l[4]=t=>r(g)())},{default:o(()=>[X]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(d,{type:"danger",onClick:l[5]||(l[5]=t=>r(F)())},{default:o(()=>[J]),_:1})]),_:1})]),_:1},8,["model"]),I((f(),h(x,{data:a.dataList,border:"",style:{width:"100%"},onSelectionChange:r(q)},{default:o(()=>[e(n,{type:"selection","header-align":"center",align:"center",width:"50"}),e(n,{"show-overflow-tooltip":"",prop:"tableName",label:"\u8868\u540D","header-align":"center",align:"center"}),e(n,{"show-overflow-tooltip":"",prop:"checkColumns",label:"\u5B57\u6BB5","header-align":"center",align:"center"}),e(N,{prop:"status","show-overflow-tooltip":"",label:"\u72B6\u6001","header-align":"center",align:"center","dict-type":"run_status"}),e(n,{prop:"checkCount",label:"\u68C0\u6D4B\u6761\u6570","header-align":"center",align:"center"}),e(n,{prop:"passCount",label:"\u68C0\u6D4B\u901A\u8FC7\u6570","header-align":"center",align:"center"}),e(n,{prop:"notPassCount",label:"\u672A\u901A\u8FC7\u6570","header-align":"center",align:"center"}),e(n,{prop:"passRate",label:"\u5408\u683C\u7387","header-align":"center",align:"center"}),e(n,{prop:"startTime","show-overflow-tooltip":"",label:"\u5F00\u59CB\u65F6\u95F4","header-align":"center",align:"center"}),e(n,{prop:"endTime","show-overflow-tooltip":"",label:"\u7ED3\u675F\u65F6\u95F4","header-align":"center",align:"center"}),e(n,{prop:"createTime","show-overflow-tooltip":"",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center"}),e(n,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"250"},{default:o(t=>[e(d,{type:"primary",link:"",onClick:k=>r(F)(t.row.id)},{default:o(()=>[O]),_:2},1032,["onClick"]),e(d,{type:"primary",link:"",onClick:k=>D(t.row.id)},{default:o(()=>[Q]),_:2},1032,["onClick"]),t.row.status==4?(f(),h(d,{key:0,type:"primary",link:"",onClick:k=>B(t.row.errorLog)},{default:o(()=>[W]),_:2},1032,["onClick"])):j("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[U,a.dataListLoading]]),e(M,{"current-page":a.page,"page-sizes":a.pageSizes,"page-size":a.limit,total:a.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:r(T),onCurrentChange:r(Y)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(v,{modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=t=>_.value=t),title:"\u9519\u8BEF\u65E5\u5FD7",width:"55%"},{default:o(()=>[K("div",Z,[e(G,{id:"qualityTableErrorLog",ref_key:"qualityTableErrorLogRef",ref:C,style:{height:"500px"}},null,512)])]),_:1},8,["modelValue"]),e(P,{ref_key:"taskColumnRef",ref:y},null,512)]),_:1},8,["modelValue"])}}});export{oe as _};
