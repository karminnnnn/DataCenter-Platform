import{c as O}from"./database.e836db09.js";import{g as G,u as K,a as Q}from"./apiConfig.3f64c346.js";import{_ as X}from"./databases.vue_vue_type_style_index_0_lang.b926b0e1.js";import{_ as H}from"./middledb.vue_vue_type_style_index_0_lang.9db5fc2b.js";import{_ as J}from"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";import{d as W,K as Y,h as _,X as T,r as i,o as r,c as k,b as l,w as e,a as u,t as o,f,F as S,e as Z,G as b,l as c}from"./index.afa5927e.js";const ee=c("\u6570\u636E\u5E93"),le=c("\u4E2D\u53F0\u5E93"),ae=c("\u4E0D\u9650\u6B21\u6570"),te=c("\u6307\u5B9A\u6B21\u6570"),ue=c("tips:\u8FD9\u91CC\u7684\u8C03\u7528\u6B21\u6570\u6307\u7684\u662F\u8BE5\u5E94\u7528\u4E0B\u88AB\u6388\u6743\u7684api\u7684\u8C03\u7528\u6B21\u6570\uFF0C\u5E76\u975E\u603B\u6B21\u6570"),fe=W({__name:"app-info",emits:["refreshDataList"],setup(oe,{expose:A,emit:se}){Y(()=>{R(),x()});const R=()=>{O().then(m=>{s.databaseList=m.data})},D=_(!1),q=_(!1),C=_(""),x=()=>{G().then(m=>{C.value="http://"+m.data})},g=T({}),h=_(),p=T({name:"",path:"",type:"",note:"",requestedTimes:""}),v=_(),s=T({sqlDbType:"",sqlParam:"",sqlText:"",contentType:"application/json",openTrans:0,jsonParam:"",responseResult:"",sqlSeparator:";\\n",databaseId:"",databaseList:[],previlege:""}),L=_(),t=T({limited:"",requestTimes:"",requestedTimes:""}),B=_(),I=(m,d)=>{q.value=!0,g.id="",h.value&&h.value.resetFields(),v.value&&B.value.setEditorValue(""),m&&P(m,d)},y=_(!1),P=(m,d)=>{K(m).then(a=>{Object.assign(g,a.data),Object.assign(p,a.data),Object.assign(s,a.data),B.value.setEditorValue(s.sqlText)}),d?Q(d).then(a=>{t.id=d,t.limited=a.data.requestTimes!=-1,t.requestTimes=a.data.requestTimes,t.requestedTimes=a.data.requestedTimes,t.requestedSuccessTimes=a.data.requestedSuccessTimes,t.requestedFailedTimes=a.data.requestedFailedTimes,t.startTime=a.data.startTime,t.endTime=a.data.endTime,y.value=!0}):y.value=!1};return A({init:I}),(m,d)=>{const a=i("el-form-item"),E=i("el-form"),w=i("el-tab-pane"),F=i("el-radio"),V=i("el-radio-group"),j=i("el-option"),U=i("el-select"),$=i("el-tag"),N=i("el-tabs"),z=i("el-drawer"),M=i("el-dialog");return r(),k(S,null,[l(z,{modelValue:q.value,"onUpdate:modelValue":d[3]||(d[3]=n=>q.value=n),title:"\u8BE6\u60C5",size:"100%","destroy-on-close":!0},{default:e(()=>[u("div",null,[l(N,{"tab-position":"top"},{default:e(()=>[l(w,{label:"\u57FA\u672C\u4FE1\u606F"},{default:e(()=>[l(E,{ref_key:"basicDataFormRef",ref:h,model:p},{default:e(()=>[l(a,{label:"\u540D\u79F0",prop:"name","label-width":"auto"},{default:e(()=>[u("span",null,o(p.name),1)]),_:1}),l(a,{label:"api\u8DEF\u5F84",prop:"path","label-width":"auto"},{default:e(()=>[u("span",null,o(C.value)+o(p.path),1)]),_:1}),l(a,{label:"\u8BF7\u6C42\u65B9\u5F0F",prop:"type","label-width":"auto"},{default:e(()=>[u("span",null,o(p.type),1)]),_:1}),l(a,{label:"\u603B\u8C03\u7528\u6B21\u6570",prop:"type","label-width":"auto"},{default:e(()=>[u("span",null,o(p.requestedTimes),1)]),_:1}),l(a,{label:"\u8C03\u7528\u6210\u529F\u6B21\u6570",prop:"type","label-width":"auto"},{default:e(()=>[u("span",null,o(p.requestedSuccessTimes),1)]),_:1}),l(a,{label:"\u8C03\u7528\u5931\u8D25\u6B21\u6570",prop:"type","label-width":"auto"},{default:e(()=>[u("span",null,o(p.requestedFailedTimes),1)]),_:1}),l(a,{label:"\u63CF\u8FF0",prop:"note","label-width":"auto"},{default:e(()=>[u("p",null,o(p.note),1)]),_:1})]),_:1},8,["model"])]),_:1}),l(w,{label:"API SQL \u914D\u7F6E"},{default:e(()=>[l(E,{ref_key:"apiSqlFormRef",ref:v,model:s},{default:e(()=>[l(a,{label:"\u5E93\u7C7B\u578B",prop:"sqlDbType","label-width":"auto"},{default:e(()=>[l(V,{modelValue:s.sqlDbType,"onUpdate:modelValue":d[0]||(d[0]=n=>s.sqlDbType=n),disabled:""},{default:e(()=>[l(F,{label:1,border:""},{default:e(()=>[ee]),_:1}),l(F,{label:2,border:""},{default:e(()=>[le]),_:1})]),_:1},8,["modelValue"])]),_:1}),s.sqlDbType=="1"?(r(),f(a,{key:0,label:"\u6570\u636E\u5E93",prop:"databaseId","label-width":"auto"},{default:e(()=>[l(U,{disabled:"",modelValue:s.databaseId,"onUpdate:modelValue":d[1]||(d[1]=n=>s.databaseId=n),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9"},{default:e(()=>[(r(!0),k(S,null,Z(s.databaseList,(n,de)=>(r(),f(j,{key:n.id,label:`[${n.id}]${n.name}`,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):b("",!0),l(a,{label:"sql\u5206\u9694\u7B26",prop:"sqlSeparator","label-width":"auto"},{default:e(()=>[u("span",null,o(s.sqlSeparator),1)]),_:1}),l(a,{label:"\u5F00\u542F\u4E8B\u52A1","label-width":"auto",prop:"openTrans"},{default:e(()=>[u("span",null,o(s.openTrans==1?"\u662F":"\u5426"),1)]),_:1}),l(a,{label:"\u67E5\u8BE2\u6700\u5927\u884C\u6570","label-width":"auto",prop:"sqlMaxRow"},{default:e(()=>[u("span",null,o(s.sqlMaxRow),1)]),_:1}),l(a,{label:"sql\u8BED\u53E5","label-width":"auto",prop:"sqlText"},{default:e(()=>[l(J,{id:"apiSqlId",ref_key:"sqlStudioRef",ref:B,style:{height:"260px",width:"100%"}},null,512)]),_:1}),l(a,{label:"Content-Type",prop:"contentType","label-width":"auto"},{default:e(()=>[u("span",null,o(s.contentType),1)]),_:1}),l(a,{label:"\u6743\u9650",prop:"previlege","label-width":"auto"},{default:e(()=>[u("span",null,o(s.previlege==1?"\u79C1\u6709":"\u5F00\u653E"),1)]),_:1})]),_:1},8,["model"])]),_:1}),y.value?(r(),f(w,{key:0,label:"\u6388\u6743\u4FE1\u606F"},{default:e(()=>[l(E,{ref_key:"authDataFormRef",ref:L,model:t},{default:e(()=>[l(a,{label:"\u8C03\u7528\u6B21\u6570",prop:"limited","label-width":"auto"},{default:e(()=>[l(V,{modelValue:t.limited,"onUpdate:modelValue":d[2]||(d[2]=n=>t.limited=n),disabled:""},{default:e(()=>[l(F,{label:!1,size:"large"},{default:e(()=>[ae]),_:1}),l(F,{label:!0,size:"large"},{default:e(()=>[te]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.limited?(r(),f(a,{key:0,label:"\u6388\u6743\u6B21\u6570",prop:"requestTimes","label-width":"auto"},{default:e(()=>[u("span",null,o(t.requestTimes),1)]),_:1})):b("",!0),l(a,null,{default:e(()=>[l($,null,{default:e(()=>[ue]),_:1})]),_:1}),l(a,{label:"\u5DF2\u8C03\u7528\u6B21\u6570",prop:"requestedTimes","label-width":"auto"},{default:e(()=>[u("span",null,o(t.requestedTimes),1)]),_:1}),l(a,{label:"\u8C03\u7528\u6210\u529F\u6B21\u6570",prop:"requestedSuccessTimes","label-width":"auto"},{default:e(()=>[u("span",null,o(t.requestedSuccessTimes),1)]),_:1}),l(a,{label:"\u8C03\u7528\u5931\u8D25\u6B21\u6570",prop:"requestedFailedTimes","label-width":"auto"},{default:e(()=>[u("span",null,o(t.requestedFailedTimes),1)]),_:1}),t.startTime?(r(),f(a,{key:1,label:"\u7533\u8BF7\u5F00\u59CB\u65F6\u95F4",prop:"startTime","label-width":"auto"},{default:e(()=>[u("span",null,o(t.startTime),1)]),_:1})):b("",!0),t.endTime?(r(),f(a,{key:2,label:"\u7533\u8BF7\u7ED3\u675F\u65F6\u95F4",prop:"endTime","label-width":"auto"},{default:e(()=>[u("span",null,o(t.endTime),1)]),_:1})):b("",!0)]),_:1},8,["model"])]),_:1})):b("",!0)]),_:1})])]),_:1},8,["modelValue"]),l(M,{modelValue:D.value,"onUpdate:modelValue":d[4]||(d[4]=n=>D.value=n),title:"\u5E93\u8868\u4FE1\u606F"},{default:e(()=>[s.sqlDbType==1?(r(),f(X,{key:0,ref:"databasesRef"},null,512)):b("",!0),s.sqlDbType==2?(r(),f(H,{key:1,ref:"middledbRef"},null,512)):b("",!0)]),_:1},8,["modelValue"])],64)}}});export{fe as _};
