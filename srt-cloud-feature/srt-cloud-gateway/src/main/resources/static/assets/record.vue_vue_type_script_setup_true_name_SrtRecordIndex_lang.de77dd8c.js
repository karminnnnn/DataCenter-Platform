import{d as Y,h as m,X as K,ai as G,r as n,aj as X,o as c,c as J,b as e,w as l,a1 as O,k as s,a6 as P,f as p,a as k,G as g,F as Q,l as r}from"./index.afa5927e.js";import{_ as b}from"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";import{g as w}from"./metadataCollect.53667fb3.js";const W=r("\u67E5\u8BE2"),Z=r("\u5220\u9664"),ee=r("\u5931\u8D25"),te=r("\u6210\u529F"),le=r("\u8FD0\u884C\u4E2D"),ae=r("\u5B9E\u65F6\u65E5\u5FD7"),oe=r("\u9519\u8BEF\u65E5\u5FD7"),ne=r("\u5220\u9664"),ue=r("\u83B7\u53D6\u6700\u65B0\u65E5\u5FD7"),re={style:{padding:"15px"}},se={style:{padding:"15px"}},ie=Y({name:"SrtRecordIndex"}),pe=Y({...ie,setup(de,{expose:x}){const f=m(!1),o=K({createdIsNeed:!1,dataListUrl:"/data-governance/metadata-collect-record/page",deleteUrl:"/data-governance/metadata-collect-record",queryForm:{startTime:"",endTime:"",status:""}}),R=u=>{f.value=!0,o.queryForm.metadataCollectId=u,v()},y=m(),F=m(!1),D=m(),q=u=>{F.value=!0,w(u).then(a=>{D.value=u,y.value.setEditorValue(a.data.realTimeLog)})},z=()=>{w(D.value).then(u=>{y.value.setEditorValue(u.data.realTimeLog)})},h=m(!1),E=m(),M=u=>{h.value=!0,setTimeout(()=>{E.value.setEditorValue(u)},500)};x({init:R});const{getDataList:v,selectionChangeHandle:U,sizeChangeHandle:$,currentChangeHandle:N,deleteBatchHandle:B}=G(o);return(u,a)=>{const L=n("el-date-picker"),_=n("el-form-item"),S=n("fast-select"),i=n("el-button"),H=n("el-form"),d=n("el-table-column"),C=n("el-tag"),I=n("el-table"),j=n("el-pagination"),V=n("el-dialog"),A=X("loading");return c(),J(Q,null,[e(V,{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=t=>f.value=t),title:"\u91C7\u96C6\u8BB0\u5F55","close-on-click-modal":!1},{default:l(()=>[e(H,{inline:!0,model:o.queryForm,onKeyup:a[5]||(a[5]=O(t=>s(v)(),["enter"]))},{default:l(()=>[e(_,null,{default:l(()=>[e(L,{modelValue:o.queryForm.startTime,"onUpdate:modelValue":a[0]||(a[0]=t=>o.queryForm.startTime=t),type:"datetime",placeholder:"\u5F00\u59CB\u65F6\u95F4",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(L,{modelValue:o.queryForm.endTime,"onUpdate:modelValue":a[1]||(a[1]=t=>o.queryForm.endTime=t),type:"datetime",placeholder:"\u7ED3\u675F\u65F6\u95F4",format:"YYYY-MM-DD hh:mm:ss","value-format":"YYYY-MM-DD hh:mm:ss"},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(S,{modelValue:o.queryForm.status,"onUpdate:modelValue":a[2]||(a[2]=t=>o.queryForm.status=t),"dict-type":"metadata_collect_status",placeholder:"\u72B6\u6001",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),e(_,null,{default:l(()=>[e(i,{onClick:a[3]||(a[3]=t=>s(v)())},{default:l(()=>[W]),_:1})]),_:1}),e(_,null,{default:l(()=>[e(i,{type:"danger",onClick:a[4]||(a[4]=t=>s(B)())},{default:l(()=>[Z]),_:1})]),_:1})]),_:1},8,["model"]),P((c(),p(I,{data:o.dataList,border:"",style:{width:"100%"},onSelectionChange:s(U)},{default:l(()=>[e(d,{type:"selection","header-align":"center",align:"center",width:"50"}),e(d,{prop:"startTime",label:"\u5F00\u59CB\u65F6\u95F4","header-align":"center",align:"center"}),e(d,{prop:"endTime",label:"\u7ED3\u675F\u65F6\u95F4","header-align":"center",align:"center"}),e(d,{prop:"status",label:"\u72B6\u6001","header-align":"center",align:"center"},{default:l(t=>[k("span",null,[t.row.status==0?(c(),p(C,{key:0,type:"danger"},{default:l(()=>[ee]),_:1})):g("",!0),t.row.status==1?(c(),p(C,{key:1,type:"success"},{default:l(()=>[te]),_:1})):g("",!0),t.row.status==2?(c(),p(C,{key:2,type:"success"},{default:l(()=>[le]),_:1})):g("",!0)])]),_:1}),e(d,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center"}),e(d,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"250"},{default:l(t=>[e(i,{type:"primary",link:"",onClick:T=>q(t.row.id)},{default:l(()=>[ae]),_:2},1032,["onClick"]),t.row.status==0?(c(),p(i,{key:0,type:"primary",link:"",onClick:T=>M(t.row.errorLog)},{default:l(()=>[oe]),_:2},1032,["onClick"])):g("",!0),e(i,{type:"primary",link:"",onClick:T=>s(B)(t.row.id)},{default:l(()=>[ne]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[A,o.dataListLoading]]),e(j,{"current-page":o.page,"page-sizes":o.pageSizes,"page-size":o.limit,total:o.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s($),onCurrentChange:s(N)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"])]),_:1},8,["modelValue"]),e(V,{modelValue:F.value,"onUpdate:modelValue":a[7]||(a[7]=t=>F.value=t),title:"\u5B9E\u65F6\u65E5\u5FD7",width:"55%"},{default:l(()=>[e(i,{type:"primary",onClick:z},{default:l(()=>[ue]),_:1}),k("div",re,[e(b,{id:"collectRealTimeLog",ref_key:"collectRealTimeLogRef",ref:y,style:{height:"500px"}},null,512)])]),_:1},8,["modelValue"]),e(V,{modelValue:h.value,"onUpdate:modelValue":a[8]||(a[8]=t=>h.value=t),title:"\u9519\u8BEF\u65E5\u5FD7",width:"55%"},{default:l(()=>[k("div",se,[e(b,{id:"collectErrorLog",ref_key:"collectErrorLogRef",ref:E,style:{height:"500px"}},null,512)])]),_:1},8,["modelValue"])],64)}}});export{pe as _};
