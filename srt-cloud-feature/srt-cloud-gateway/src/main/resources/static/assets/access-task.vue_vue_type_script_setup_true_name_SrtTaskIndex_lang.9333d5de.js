import{d as w,h as d,X as j,ai as K,r,aj as M,o as F,f as h,w as a,b as e,k as s,a1 as G,a6 as X,G as J,a as O,l as c,E as v,a8 as P}from"./index.afa5927e.js";import{_ as Q}from"./access-task-detail.vue_vue_type_script_setup_true_name_SrtAccessTaskDetailIndex_lang.71f28008.js";import{g as D,s as W}from"./access.d3ea15fb.js";import{_ as Y}from"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";const Z=c("\u67E5\u8BE2"),ee=c("\u5220\u9664"),te=c("\u5B9E\u65F6\u65E5\u5FD7"),ae=c("\u540C\u6B65\u7ED3\u679C"),ue=c("\u7EC8\u6B62"),ne=c("\u5220\u9664"),le=c("\u83B7\u53D6\u6700\u65B0\u65E5\u5FD7"),oe={style:{padding:"15px"}},re=w({name:"SrtTaskIndex"}),ge=w({...re,setup(ie,{expose:T}){const g=d(!1),l=j({createdIsNeed:!1,dataListUrl:"/data-integrate/access/task-page",deleteUrl:"/data-integrate/access/task",queryForm:{dataAccessId:"",runStatus:""}}),A=n=>{l.queryForm.dataAccessId=n,g.value=!0,p()},B=d(),x=n=>{B.value.init(n)},_=d(!1),m=d(),y=d(),V=n=>{_.value=!0,y.value=n,D(n).then(t=>{m.value.setEditorValue(t.data.realTimeLog)})},L=()=>{D(y.value).then(n=>{m.value.setEditorValue(n.data.realTimeLog)})},S=n=>{if(!n){v.warning("\u81EA\u52A8\u8C03\u5EA6\u7C7B\u578B\u7684\u4EFB\u52A1\u8BF7\u524D\u5F80\u6570\u636E\u63A5\u5165\uFF0C\u70B9\u51FB\u53D6\u6D88\u53D1\u5E03\u505C\u6B62\uFF01");return}P.confirm("\u786E\u5B9A\u7EC8\u6B62\u8BE5\u624B\u52A8\u8C03\u5EA6\u7684\u4EFB\u52A1\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{W(n).then(t=>{v({message:"\u4EFB\u52A1\u5DF2\u6210\u529F\u7EC8\u6B62",type:"success"}),p()})}).catch(()=>{})},{getDataList:p,selectionChangeHandle:R,sizeChangeHandle:z,currentChangeHandle:$,deleteBatchHandle:E}=K(l);return T({init:A}),(n,t)=>{const I=r("fast-select"),C=r("el-form-item"),i=r("el-button"),N=r("el-form"),o=r("el-table-column"),k=r("fast-table-column"),q=r("el-table"),U=r("el-pagination"),b=r("el-dialog"),H=M("loading");return F(),h(b,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=u=>g.value=u),title:"\u6267\u884C\u8BB0\u5F55"},{default:a(()=>[e(N,{inline:!0,model:l.queryForm,onKeyup:t[3]||(t[3]=G(u=>s(p)(),["enter"]))},{default:a(()=>[e(C,null,{default:a(()=>[e(I,{modelValue:l.queryForm.runStatus,"onUpdate:modelValue":t[0]||(t[0]=u=>l.queryForm.runStatus=u),placeholder:"\u8FD0\u884C\u72B6\u6001","dict-type":"run_status",clearable:""},null,8,["modelValue"])]),_:1}),e(C,null,{default:a(()=>[e(i,{type:"primary",onClick:t[1]||(t[1]=u=>s(p)())},{default:a(()=>[Z]),_:1})]),_:1}),e(C,null,{default:a(()=>[e(i,{type:"danger",onClick:t[2]||(t[2]=u=>s(E)())},{default:a(()=>[ee]),_:1})]),_:1})]),_:1},8,["model"]),X((F(),h(q,{data:l.dataList,border:"",style:{width:"100%"},onSelectionChange:s(R)},{default:a(()=>[e(o,{type:"selection","header-align":"center",align:"center",width:"50"}),e(o,{prop:"id",label:"\u5E8F\u53F7","header-align":"center",align:"center"}),e(k,{prop:"runStatus",label:"\u8FD0\u884C\u72B6\u6001","header-align":"center",align:"center","dict-type":"run_status",width:"120px"}),e(k,{prop:"runType",label:"\u4EFB\u52A1\u7C7B\u578B","header-align":"center",align:"center","dict-type":"access_run_type",width:"120px"}),e(o,{prop:"startTime",label:"\u5F00\u59CB\u65F6\u95F4","header-align":"center",align:"center",width:"160px"}),e(o,{prop:"endTime",label:"\u7ED3\u675F\u65F6\u95F4","header-align":"center",align:"center",width:"160px"}),e(o,{prop:"dataCount",label:"\u66F4\u65B0\u6570\u636E\u91CF","header-align":"center",align:"center"}),e(o,{prop:"tableSuccessCount",label:"\u6210\u529F\u8868\u6570\u91CF","header-align":"center",align:"center"}),e(o,{prop:"tableFailCount",label:"\u5931\u8D25\u8868\u6570\u91CF","header-align":"center",align:"center"}),e(o,{prop:"byteCount",label:"\u6570\u636E\u91CF\u5927\u5C0F","header-align":"center",align:"center"}),e(o,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center",width:"160px"}),e(o,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"300"},{default:a(u=>[e(i,{type:"primary",link:"",onClick:f=>V(u.row.id)},{default:a(()=>[te]),_:2},1032,["onClick"]),e(i,{type:"primary",link:"",onClick:f=>x(u.row.id)},{default:a(()=>[ae]),_:2},1032,["onClick"]),u.row.runStatus==2?(F(),h(i,{key:0,type:"primary",link:"",onClick:f=>S(u.row.executeNo)},{default:a(()=>[ue]),_:2},1032,["onClick"])):J("",!0),e(i,{type:"primary",link:"",onClick:f=>s(E)(u.row.id)},{default:a(()=>[ne]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[H,l.dataListLoading]]),e(U,{"current-page":l.page,"page-sizes":l.pageSizes,"page-size":l.limit,total:l.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s(z),onCurrentChange:s($)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(Q,{ref_key:"accessTaskDetailRef",ref:B},null,512),e(b,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=u=>_.value=u),title:"\u5B9E\u65F6\u65E5\u5FD7",width:"65%"},{default:a(()=>[e(i,{type:"primary",onClick:L},{default:a(()=>[le]),_:1}),O("div",oe,[e(Y,{id:"accessRealTimeLog",ref_key:"accessRealTimeLogRef",ref:m,style:{height:"500px"}},null,512)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}});export{ge as _};
