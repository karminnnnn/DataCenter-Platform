import{d as N,h as i,X as x,r,o as b,f as c,w as o,b as u,G as U,a1 as w,l as v,al as F,E as P}from"./index.afa5927e.js";import{a as V,b as q}from"./apiGroup.3f0ca4aa.js";const L=v("\u53D6\u6D88"),G=v("\u786E\u5B9A"),O=N({__name:"add-or-update",emits:["refreshDataList"],setup(R,{expose:A,emit:E}){const n=i(!1),p=i(),m=i([]),t=x({orgId:"",parentId:"",parentPath:"",path:"",name:"",type:1,orderNo:0,description:""}),y=(d,e,f)=>{n.value=!0,t.id="",p.value&&p.value.resetFields(),t.parentId=e,t.parentPath=f,e?V(e).then(a=>{a.data&&F(a.data.orgId).then(s=>{m.value=s.data})}):F().then(a=>{m.value=a.data}),d&&C(d)},C=d=>{V(d).then(e=>{Object.assign(t,e.data)})},D=i({orgId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNo:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=()=>{p.value.validate(d=>{if(!d)return!1;t.type=t.parentId==0?1:t.type,q(t).then(()=>{P.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{n.value=!1,E("refreshDataList")}})})})};return A({init:y}),(d,e)=>{const f=r("el-tree-select"),a=r("el-form-item"),s=r("el-input"),B=r("fast-select"),k=r("el-input-number"),h=r("el-form"),g=r("el-button"),I=r("el-dialog");return b(),c(I,{modelValue:n.value,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value=l),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:o(()=>[u(g,{onClick:e[7]||(e[7]=l=>n.value=!1)},{default:o(()=>[L]),_:1}),u(g,{type:"primary",onClick:e[8]||(e[8]=l=>_())},{default:o(()=>[G]),_:1})]),default:o(()=>[u(h,{ref_key:"dataFormRef",ref:p,model:t,rules:D.value,"label-width":"100px",onKeyup:e[6]||(e[6]=w(l=>_(),["enter"]))},{default:o(()=>[u(a,{prop:"orgId",label:"\u6240\u5C5E\u673A\u6784"},{default:o(()=>[u(f,{clearable:"",modelValue:t.orgId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.orgId=l),data:m.value,"check-strictly":"","value-key":"id",props:{label:"name",children:"children"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),u(a,{label:"\u7236\u7EA7\u76EE\u5F55",prop:"parentPath"},{default:o(()=>[u(s,{disabled:"",modelValue:t.parentPath,"onUpdate:modelValue":e[1]||(e[1]=l=>t.parentPath=l),placeholder:""},null,8,["modelValue"])]),_:1}),u(a,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[u(s,{modelValue:t.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.name=l),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t.parentId!=0?(b(),c(a,{key:0,label:"\u7C7B\u578B",prop:"type"},{default:o(()=>[u(B,{disabled:!!t.id,modelValue:t.type,"onUpdate:modelValue":e[3]||(e[3]=l=>t.type=l),placeholder:"\u7C7B\u578B","dict-type":"api_group_type",clearable:""},null,8,["disabled","modelValue"])]),_:1})):U("",!0),u(a,{label:"\u5E8F\u53F7",prop:"orderNo"},{default:o(()=>[u(k,{modelValue:t.orderNo,"onUpdate:modelValue":e[4]||(e[4]=l=>t.orderNo=l),max:9999,placeholder:"\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),u(a,{label:"\u63CF\u8FF0",prop:"description"},{default:o(()=>[u(s,{type:"textarea",modelValue:t.description,"onUpdate:modelValue":e[5]||(e[5]=l=>t.description=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{O as _};
