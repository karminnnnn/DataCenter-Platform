import{d as k,K as V,h as b,X as j,ai as M,r as n,aj as O,o as i,f as p,w as o,a as F,b as e,c as X,e as G,F as J,k as c,a1 as Q,a6 as m,a7 as v,l as d,E as W}from"./index.afa5927e.js";import{_ as Y}from"./app-info.vue_vue_type_script_setup_true_lang.883f96fa.js";import{_ as Z}from"./api-test.vue_vue_type_script_setup_true_lang.a98e6589.js";import{c as ee}from"./database.e836db09.js";import{i as te}from"./apiConfig.3f64c346.js";import"./databases.vue_vue_type_style_index_0_lang.b926b0e1.js";import"./database.235d7a89.js";import"./table.e1c1b00a.js";import"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";import"./toggleHighContrast.9f64e070.js";import"./add-or-update.vue_vue_type_script_setup_true_lang.0e6432a4.js";import"./middledb.vue_vue_type_style_index_0_lang.9db5fc2b.js";import"./house.1ac0c09f.js";import"./param-studio.vue_vue_type_script_setup_true_lang.44bb4522.js";import"./ts.worker.921d436c.js";const ae={class:"apiConfigDivClass"},le=d("\u67E5\u8BE2"),oe=d("\u5BFC\u51FA\u6587\u6863"),ne=d("\u672A\u53D1\u5E03"),re=d("\u5DF2\u53D1\u5E03"),ue=d("\u67E5\u770B"),se=d("\u6D4B\u8BD5"),ie={class:"drawerClass",style:{height:"100%"}},de={class:"drawerClass",style:{height:"100%"}},pe=k({name:"DataAssetsApiResource"}),ke=k({...pe,setup(ce){V(()=>{T()}),b([]);const T=()=>{ee().then(r=>{a.databaseList=r.data})},a=j({createdIsNeed:!1,databaseList:[],dataListUrl:"/data-service/api-config/page-resource",deleteUrl:"/data-service/api-config",path:"",queryForm:{groupId:"",name:"",path:"",contentType:"",status:"",sqlDbType:"",databaseId:"",previlege:"",openTrans:""}});V(()=>{const r=sessionStorage.getItem("apiResourceId"),l=sessionStorage.getItem("queryApply");a.queryForm.resourceId=r,a.queryForm.queryApply=l||0,g()});const C=b(),I=(r,l)=>{C.value.init(r,l)},w=b(),A=r=>{w.value.init(r)},L=async()=>{let r=a.dataListSelections?a.dataListSelections:[];if(r.length===0){W.warning("\u8BF7\u52FE\u9009\u9700\u8981\u5BFC\u51FA\u7684api");return}const{data:l}=await te();await U("http://"+l+"/data-service/api-config/export-docs","API DOCS.md","POST",r)},{getDataList:g,selectionChangeHandle:S,sizeChangeHandle:x,currentChangeHandle:z,deleteBatchHandle:_e,downloadHandle:U}=M(a);return(r,l)=>{const $=n("el-input"),s=n("el-form-item"),f=n("fast-select"),y=n("el-option"),B=n("el-select"),_=n("el-button"),R=n("el-form"),u=n("el-table-column"),h=n("fast-table-column"),q=n("el-tag"),D=n("fast-creator-column"),H=n("el-table"),N=n("el-pagination"),K=n("el-card"),P=O("loading");return i(),p(K,null,{default:o(()=>[F("div",ae,[e(R,{inline:!0,model:a.queryForm,onKeyup:l[8]||(l[8]=Q(t=>c(g)(),["enter"]))},{default:o(()=>[e(s,null,{default:o(()=>[e($,{modelValue:a.queryForm.name,"onUpdate:modelValue":l[0]||(l[0]=t=>a.queryForm.name=t),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(f,{modelValue:a.queryForm.contentType,"onUpdate:modelValue":l[1]||(l[1]=t=>a.queryForm.contentType=t),"dict-type":"content_type",placeholder:"\u5185\u5BB9\u7C7B\u578B",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(B,{modelValue:a.queryForm.sqlDbType,"onUpdate:modelValue":l[2]||(l[2]=t=>a.queryForm.sqlDbType=t),clearable:"",filterable:"",placeholder:"sql\u5E93\u7C7B\u578B"},{default:o(()=>[(i(),p(y,{key:1,label:"\u6570\u636E\u5E93",value:1})),(i(),p(y,{key:2,label:"\u4E2D\u53F0\u5E93",value:2}))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(B,{modelValue:a.queryForm.databaseId,"onUpdate:modelValue":l[3]||(l[3]=t=>a.queryForm.databaseId=t),clearable:"",filterable:"",placeholder:"\u6570\u636E\u5E93"},{default:o(()=>[(i(!0),X(J,null,G(a.databaseList,(t,E)=>(i(),p(y,{key:t.id,label:`[${t.id}]${t.name}`,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(f,{modelValue:a.queryForm.previlege,"onUpdate:modelValue":l[4]||(l[4]=t=>a.queryForm.previlege=t),"dict-type":"yes_or_no",placeholder:"\u662F\u5426\u79C1\u6709",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(f,{modelValue:a.queryForm.openTrans,"onUpdate:modelValue":l[5]||(l[5]=t=>a.queryForm.openTrans=t),"dict-type":"yes_or_no",placeholder:"\u5F00\u542F\u4E8B\u52A1",clearable:"",filterable:""},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(_,{onClick:l[6]||(l[6]=t=>c(g)())},{default:o(()=>[le]),_:1})]),_:1}),e(s,null,{default:o(()=>[e(_,{type:"warning",onClick:l[7]||(l[7]=t=>L())},{default:o(()=>[oe]),_:1})]),_:1})]),_:1},8,["model"]),m((i(),p(H,{data:a.dataList,border:"",style:{width:"100%"},onSelectionChange:c(S)},{default:o(()=>[e(u,{type:"selection","header-align":"center",align:"center",width:"50"}),e(u,{"show-overflow-tooltip":"",label:"\u5206\u7EC4","header-align":"center",align:"center",width:"150",prop:"group"}),e(u,{prop:"path","show-overflow-tooltip":"",label:"api\u5730\u5740","header-align":"center",align:"center"}),e(u,{"show-overflow-tooltip":"",prop:"name",label:"\u540D\u79F0","header-align":"center",align:"center"}),e(h,{prop:"contentType",label:"\u5185\u5BB9\u7C7B\u578B","dict-type":"content_type",width:"150","header-align":"center",align:"center"}),e(u,{prop:"status",label:"\u72B6\u6001","header-align":"center",align:"center"},{default:o(t=>[m(e(q,{type:"info"},{default:o(()=>[ne]),_:2},1536),[[v,t.row.status==0]]),m(e(q,{type:"success"},{default:o(()=>[re]),_:2},1536),[[v,t.row.status==1]])]),_:1}),e(h,{prop:"previlege",label:"\u79C1\u6709","dict-type":"yes_or_no","header-align":"center",align:"center"}),e(h,{prop:"openTrans",label:"\u5F00\u542F\u4E8B\u52A1","dict-type":"yes_or_no","header-align":"center",align:"center"}),e(D,{prop:"releaseUserId",label:"\u53D1\u5E03\u8005","header-align":"center",align:"center"}),e(u,{"show-overflow-tooltip":"",prop:"releaseTime",label:"\u53D1\u5E03\u65F6\u95F4","header-align":"center",align:"center"}),e(D,{prop:"creator",label:"\u521B\u5EFA\u8005","header-align":"center",align:"center"}),e(u,{"show-overflow-tooltip":"",prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center"}),e(u,{"show-overflow-tooltip":"",prop:"updateTime",label:"\u66F4\u65B0\u65F6\u95F4","header-align":"center",align:"center"}),e(u,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"260"},{default:o(t=>[e(_,{type:"primary",link:"",onClick:E=>I(t.row.id,t.row.authId)},{default:o(()=>[ue]),_:2},1032,["onClick"]),m(e(_,{type:"primary",link:"",onClick:E=>A(t.row)},{default:o(()=>[se]),_:2},1032,["onClick"]),[[v,t.row.status==1]])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[P,a.dataListLoading]]),e(N,{"current-page":a.page,"page-sizes":a.pageSizes,"page-size":a.limit,total:a.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c(x),onCurrentChange:c(z)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),F("div",ie,[e(Y,{ref_key:"appInfoRef",ref:C},null,512)]),F("div",de,[e(Z,{ref_key:"apiTestRef",ref:w},null,512)])])]),_:1})}}});export{ke as default};
