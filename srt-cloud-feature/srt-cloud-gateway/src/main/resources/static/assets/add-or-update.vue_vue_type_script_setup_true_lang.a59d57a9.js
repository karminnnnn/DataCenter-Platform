import{d as x,h as m,X as U,r as o,o as f,f as _,w as u,b as a,G as w,a1 as P,l as v,al as E,E as q}from"./index.afa5927e.js";import{u as V,a as L}from"./masterDataCatalog.f5a68431.js";const M=v("\u53D6\u6D88"),R=v("\u786E\u5B9A"),j=x({__name:"add-or-update",emits:["refreshDataList"],setup($,{expose:C,emit:y}){const s=m(!1),p=m(),g=m([]),t=U({orgId:"",parentId:"",parentPath:"",path:"",name:"",type:0,orderNo:0,description:""}),A=(n,e,b,d)=>{s.value=!0,t.id="",p.value&&p.value.resetFields(),t.parentId=e,t.parentPath=b,e?V(e).then(r=>{r.data&&E(r.data.orgId).then(i=>{g.value=i.data})}):E().then(r=>{g.value=r.data}),n&&D(n)},D=n=>{V(n).then(e=>{Object.assign(t,e.data)})},B=m({orgId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNo:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=()=>{p.value.validate(n=>{if(!n)return!1;t.type=t.parentId==0?0:t.type,L(t).then(()=>{q.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{s.value=!1,y("refreshDataList")}})})})};return C({init:A}),(n,e)=>{const b=o("el-tree-select"),d=o("el-form-item"),r=o("el-input"),i=o("el-option"),k=o("el-select"),I=o("el-input-number"),h=o("el-form"),F=o("el-button"),N=o("el-dialog");return f(),_(N,{modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value=l),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:u(()=>[a(F,{onClick:e[7]||(e[7]=l=>s.value=!1)},{default:u(()=>[M]),_:1}),a(F,{type:"primary",onClick:e[8]||(e[8]=l=>c())},{default:u(()=>[R]),_:1})]),default:u(()=>[a(h,{ref_key:"dataFormRef",ref:p,model:t,rules:B.value,"label-width":"100px",onKeyup:e[6]||(e[6]=P(l=>c(),["enter"]))},{default:u(()=>[a(d,{prop:"orgId",label:"\u6240\u5C5E\u673A\u6784"},{default:u(()=>[a(b,{clearable:"",modelValue:t.orgId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.orgId=l),data:g.value,"check-strictly":"","value-key":"id",props:{label:"name",children:"children"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),a(d,{label:"\u7236\u7EA7\u76EE\u5F55",prop:"parentPath"},{default:u(()=>[a(r,{disabled:"",modelValue:t.parentPath,"onUpdate:modelValue":e[1]||(e[1]=l=>t.parentPath=l),placeholder:""},null,8,["modelValue"])]),_:1}),a(d,{label:"\u540D\u79F0",prop:"name"},{default:u(()=>[a(r,{modelValue:t.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.name=l),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t.parentId!=0?(f(),_(d,{key:0,label:"\u7C7B\u578B",prop:"type"},{default:u(()=>[a(k,{modelValue:t.type,"onUpdate:modelValue":e[3]||(e[3]=l=>t.type=l),placeholder:"\u7C7B\u578B",disabled:!!t.id},{default:u(()=>[(f(),_(i,{key:0,label:"\u76EE\u5F55",value:0})),(f(),_(i,{key:1,label:"\u4E3B\u6570\u636E",value:1}))]),_:1},8,["modelValue","disabled"])]),_:1})):w("",!0),a(d,{label:"\u5E8F\u53F7",prop:"orderNo"},{default:u(()=>[a(I,{modelValue:t.orderNo,"onUpdate:modelValue":e[4]||(e[4]=l=>t.orderNo=l),min:1,max:9999,placeholder:"\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),a(d,{label:"\u63CF\u8FF0",prop:"description"},{default:u(()=>[a(r,{type:"textarea",modelValue:t.description,"onUpdate:modelValue":e[5]||(e[5]=l=>t.description=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{j as _};
