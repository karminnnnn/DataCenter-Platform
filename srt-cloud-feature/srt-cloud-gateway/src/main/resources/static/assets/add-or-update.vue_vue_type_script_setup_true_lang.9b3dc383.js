import{d as y,h as m,X as k,r as o,o as w,f as U,w as a,b as t,a1 as h,l as _,al as x,E as q}from"./index.afa5927e.js";import{u as I,a as L}from"./cluster.d0557579.js";const R=_("\u53D6\u6D88"),$=_("\u786E\u5B9A"),N=y({__name:"add-or-update",emits:["refreshDataList"],setup(H,{expose:g,emit:b}){const n=m(!1),d=m(),p=m([]),u=k({orgId:"",name:"",alias:"",type:"",hosts:"",enabled:!0,note:""}),A=s=>{n.value=!0,u.id="",d.value&&d.value.resetFields(),x().then(e=>{p.value=e.data}),s&&V(s)},V=s=>{I(s).then(e=>{Object.assign(u,e.data)})},c=m({orgId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],alias:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],hosts:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),F=()=>{d.value.validate(s=>{if(!s)return!1;L(u).then(()=>{q.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{n.value=!1,b("refreshDataList")}})})})};return g({init:A}),(s,e)=>{const B=o("el-tree-select"),r=o("el-form-item"),i=o("el-input"),E=o("fast-select"),v=o("el-switch"),C=o("el-form"),f=o("el-button"),D=o("el-dialog");return w(),U(D,{modelValue:n.value,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value=l),title:u.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:a(()=>[t(f,{onClick:e[8]||(e[8]=l=>n.value=!1)},{default:a(()=>[R]),_:1}),t(f,{type:"primary",onClick:e[9]||(e[9]=l=>F())},{default:a(()=>[$]),_:1})]),default:a(()=>[t(C,{ref_key:"dataFormRef",ref:d,model:u,rules:c.value,"label-width":"100px",onKeyup:e[7]||(e[7]=h(l=>F(),["enter"]))},{default:a(()=>[t(r,{prop:"orgId",label:"\u6240\u5C5E\u673A\u6784"},{default:a(()=>[t(B,{clearable:"",modelValue:u.orgId,"onUpdate:modelValue":e[0]||(e[0]=l=>u.orgId=l),data:p.value,"check-strictly":"","value-key":"id",props:{label:"name",children:"children"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),t(r,{label:"\u5B9E\u4F8B\u540D\u79F0",prop:"name"},{default:a(()=>[t(i,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=l=>u.name=l),placeholder:"\u5B9E\u4F8B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u522B\u540D",prop:"alias"},{default:a(()=>[t(i,{modelValue:u.alias,"onUpdate:modelValue":e[2]||(e[2]=l=>u.alias=l),placeholder:"\u522B\u540D"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5B9E\u4F8B\u7C7B\u578B",prop:"type"},{default:a(()=>[t(E,{modelValue:u.type,"onUpdate:modelValue":e[3]||(e[3]=l=>u.type=l),"dict-type":"production_cluster_type",placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5B9E\u4F8B\u5730\u5740",prop:"hosts"},{default:a(()=>[t(i,{modelValue:u.hosts,"onUpdate:modelValue":e[4]||(e[4]=l=>u.hosts=l),rows:3,type:"textarea",placeholder:"\u6DFB\u52A0 Flink \u96C6\u7FA4\u7684 JobManager \u7684 RestApi \u5730\u5740\u3002\u5F53 HA \u6A21\u5F0F\u65F6\uFF0C\u5730\u5740\u95F4\u7528\u82F1\u6587\u9017\u53F7\u5206\u9694\uFF0C\u4F8B\u5982\uFF1A192.168.40.135:8081,192.168.40.136:8081,192.168.40.137:8081"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u542F\u7528",prop:"enabled"},{default:a(()=>[t(v,{modelValue:u.enabled,"onUpdate:modelValue":e[5]||(e[5]=l=>u.enabled=l),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5907\u6CE8",prop:"note"},{default:a(()=>[t(i,{modelValue:u.note,"onUpdate:modelValue":e[6]||(e[6]=l=>u.note=l),placeholder:"\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{N as _};
