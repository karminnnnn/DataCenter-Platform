import{ad as p,d as U,h as g,X as w,r,o as c,f,w as u,b as a,G as P,a1 as L,l as A,al as F,E as R}from"./index.afa5927e.js";const V=n=>p.get("/data-governance/quality-config-category/"+n),T=n=>n.id?p.put("/data-governance/quality-config-category",n):p.post("/data-governance/quality-config-category",n),j=()=>p.get("/data-governance/quality-config-category/list-tree"),G=n=>p.delete("/data-governance/quality-config-category/"+n),$=A("\u53D6\u6D88"),K=A("\u786E\u5B9A"),H=U({__name:"category-add-or-update",emits:["refreshDataList"],setup(n,{expose:C,emit:D}){const s=g(!1),m=g(),_=g([]),t=w({orgId:"",parentId:"",parentPath:"",path:"",name:"",type:0,orderNo:0,note:""}),B=(d,e,y)=>{s.value=!0,t.id="",m.value&&m.value.resetFields(),t.parentId=e,t.parentPath=y,e?V(e).then(o=>{o.data&&F(o.data.orgId).then(i=>{_.value=i.data})}):F().then(o=>{_.value=o.data}),d&&k(d)},k=d=>{V(d).then(e=>{Object.assign(t,e.data)})},q=g({orgId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNo:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=()=>{m.value.validate(d=>{if(!d)return!1;t.type=t.parentId==0?0:t.type,T(t).then(()=>{R.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{s.value=!1,D("refreshDataList")}})})})};return C({init:B}),(d,e)=>{const y=r("el-tree-select"),o=r("el-form-item"),i=r("el-input"),b=r("el-option"),N=r("el-select"),h=r("el-input-number"),I=r("el-form"),E=r("el-button"),x=r("el-dialog");return c(),f(x,{modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=l=>s.value=l),title:t.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:u(()=>[a(E,{onClick:e[7]||(e[7]=l=>s.value=!1)},{default:u(()=>[$]),_:1}),a(E,{type:"primary",onClick:e[8]||(e[8]=l=>v())},{default:u(()=>[K]),_:1})]),default:u(()=>[a(I,{ref_key:"dataFormRef",ref:m,model:t,rules:q.value,"label-width":"100px",onKeyup:e[6]||(e[6]=L(l=>v(),["enter"]))},{default:u(()=>[a(o,{prop:"orgId",label:"\u6240\u5C5E\u673A\u6784"},{default:u(()=>[a(y,{clearable:"",modelValue:t.orgId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.orgId=l),data:_.value,"check-strictly":"","value-key":"id",props:{label:"name",children:"children"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),a(o,{label:"\u7236\u7EA7\u76EE\u5F55",prop:"parentPath"},{default:u(()=>[a(i,{disabled:"",modelValue:t.parentPath,"onUpdate:modelValue":e[1]||(e[1]=l=>t.parentPath=l),placeholder:""},null,8,["modelValue"])]),_:1}),a(o,{label:"\u540D\u79F0",prop:"name"},{default:u(()=>[a(i,{modelValue:t.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.name=l),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t.parentId!=0?(c(),f(o,{key:0,label:"\u7C7B\u578B",prop:"type"},{default:u(()=>[a(N,{modelValue:t.type,"onUpdate:modelValue":e[3]||(e[3]=l=>t.type=l),placeholder:"\u7C7B\u578B",disabled:!!t.id},{default:u(()=>[(c(),f(b,{key:0,label:"\u666E\u901A\u76EE\u5F55",value:0})),(c(),f(b,{key:1,label:"\u89C4\u5219\u914D\u7F6E\u76EE\u5F55",value:1}))]),_:1},8,["modelValue","disabled"])]),_:1})):P("",!0),a(o,{label:"\u5E8F\u53F7",prop:"orderNo"},{default:u(()=>[a(h,{modelValue:t.orderNo,"onUpdate:modelValue":e[4]||(e[4]=l=>t.orderNo=l),max:9999,placeholder:"\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u63CF\u8FF0",prop:"note"},{default:u(()=>[a(i,{type:"textarea",modelValue:t.note,"onUpdate:modelValue":e[5]||(e[5]=l=>t.note=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{H as _,G as d,j as l};
