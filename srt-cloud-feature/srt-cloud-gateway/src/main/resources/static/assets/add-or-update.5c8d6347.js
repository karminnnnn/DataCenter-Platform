import{d as R,h as r,X as q,r as n,o as d,f as p,w as o,b as u,aF as G,G as y,a as g,c as j,e as z,n as X,F as J,a1 as Q,l as i,as as W,aG as Y,aH as Z,aI as ee,E as te,_ as le}from"./index.afa5927e.js";const oe=i("\u83DC\u5355"),ue=i("\u6309\u94AE"),ae=i("\u63A5\u53E3"),ne=i("\u5185\u90E8\u6253\u5F00"),se=i("\u5916\u90E8\u6253\u5F00"),re={class:"mod__menu-icon-inner"},de={class:"mod__menu-icon-list"},ie=i("\u53D6\u6D88"),pe=i("\u786E\u5B9A"),me=R({__name:"add-or-update",emits:["refreshDataList"],setup(_e,{expose:N,emit:U}){const m=r(!1),F=r([]),V=r([]),C=r(),f=r(),E=r(),k=r(),e=q({id:"",type:0,name:"",pid:"0",parentName:"",url:"",authority:"",sort:0,icon:"",openStyle:0}),x=a=>{m.value=!0,e.id="",f.value&&f.value.resetFields(),a?M(a):v(),A(),V.value=W()},w=()=>{A(),v()},A=()=>Y(0).then(a=>{F.value=a.data}),M=a=>{Z(a).then(t=>{if(Object.assign(e,t.data),e.pid=="0")return v();C.value.setCurrentKey(e.pid)})},v=()=>{e.pid="0",e.parentName="\u4E00\u7EA7\u83DC\u5355"},S=a=>{e.pid=a.id,e.parentName=a.name,E.value.hide()},$=a=>{e.icon=a,k.value.hide()},H=r({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),D=()=>{f.value.validate(a=>{if(!a)return!1;ee(e).then(()=>{te.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{m.value=!1,U("refreshDataList")}})})})};return N({init:x}),(a,t)=>{const _=n("el-radio"),h=n("el-radio-group"),s=n("el-form-item"),c=n("el-input"),L=n("svg-icon"),P=n("el-tree"),B=n("el-popover"),T=n("el-input-number"),b=n("el-button"),I=n("el-form"),K=n("el-dialog");return d(),p(K,{modelValue:m.value,"onUpdate:modelValue":t[13]||(t[13]=l=>m.value=l),title:e.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1,draggable:""},{footer:o(()=>[u(b,{onClick:t[11]||(t[11]=l=>m.value=!1)},{default:o(()=>[ie]),_:1}),u(b,{type:"primary",onClick:t[12]||(t[12]=l=>D())},{default:o(()=>[pe]),_:1})]),default:o(()=>[u(I,{ref_key:"dataFormRef",ref:f,model:e,rules:H.value,"label-width":"120px",onKeyup:t[10]||(t[10]=Q(l=>D(),["enter"]))},{default:o(()=>[u(s,{prop:"type",label:"\u7C7B\u578B"},{default:o(()=>[u(h,{modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=l=>e.type=l),disabled:!!e.id,onChange:t[1]||(t[1]=l=>w())},{default:o(()=>[u(_,{label:0},{default:o(()=>[oe]),_:1}),u(_,{label:1},{default:o(()=>[ue]),_:1}),u(_,{label:2},{default:o(()=>[ae]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),u(s,{prop:"name",label:"\u540D\u79F0"},{default:o(()=>[u(c,{modelValue:e.name,"onUpdate:modelValue":t[2]||(t[2]=l=>e.name=l),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(s,{prop:"parentName",label:"\u4E0A\u7EA7\u83DC\u5355",class:"popover-list"},{default:o(()=>[u(B,{ref_key:"menuListPopover",ref:E,placement:"bottom-start",trigger:"click",width:400},{reference:o(()=>[u(c,{modelValue:e.parentName,"onUpdate:modelValue":t[4]||(t[4]=l=>e.parentName=l),readonly:!0,placeholder:"\u4E0A\u7EA7\u83DC\u5355"},{suffix:o(()=>[e.pid!=="0"?(d(),p(L,{key:0,icon:"icon-close-circle",onClick:t[3]||(t[3]=G(l=>v(),["stop"]))})):y("",!0)]),_:1},8,["modelValue"])]),default:o(()=>[g("div",null,[u(P,{ref_key:"menuListTree",ref:C,data:F.value,props:{label:"name",children:"children"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:"",onCurrentChange:S},null,8,["data"])])]),_:1},512)]),_:1}),e.type===0?(d(),p(s,{key:0,prop:"url",label:"\u8DEF\u7531"},{default:o(()=>[u(c,{modelValue:e.url,"onUpdate:modelValue":t[5]||(t[5]=l=>e.url=l),placeholder:"\u8DEF\u7531"},null,8,["modelValue"])]),_:1})):y("",!0),u(s,{prop:"sort",label:"\u6392\u5E8F"},{default:o(()=>[u(T,{modelValue:e.sort,"onUpdate:modelValue":t[6]||(t[6]=l=>e.sort=l),"controls-position":"right",min:0,label:"\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),e.type===0?(d(),p(s,{key:1,prop:"openStyle",label:"\u6253\u5F00\u65B9\u5F0F"},{default:o(()=>[u(h,{modelValue:e.openStyle,"onUpdate:modelValue":t[7]||(t[7]=l=>e.openStyle=l)},{default:o(()=>[u(_,{label:0},{default:o(()=>[ne]),_:1}),u(_,{label:1},{default:o(()=>[se]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0),u(s,{prop:"authority",label:"\u6388\u6743\u6807\u8BC6"},{default:o(()=>[u(c,{modelValue:e.authority,"onUpdate:modelValue":t[8]||(t[8]=l=>e.authority=l),placeholder:"\u591A\u4E2A\u7528\u9017\u53F7\u5206\u9694\uFF0C\u5982\uFF1Asys:menu:save,sys:menu:update"},null,8,["modelValue"])]),_:1}),e.type===0?(d(),p(s,{key:2,prop:"icon",label:"\u56FE\u6807",class:"popover-list"},{default:o(()=>[u(B,{ref_key:"iconListPopover",ref:k,placement:"top-start",trigger:"click",width:470,"popper-class":"mod__menu-icon-popover"},{reference:o(()=>[u(c,{modelValue:e.icon,"onUpdate:modelValue":t[9]||(t[9]=l=>e.icon=l),readonly:!0,placeholder:"\u56FE\u6807"},null,8,["modelValue"])]),default:o(()=>[g("div",re,[g("div",de,[(d(!0),j(J,null,z(V.value,(l,O)=>(d(),p(b,{key:O,class:X({"is-active":e.icon===l}),onClick:ce=>$(l)},{default:o(()=>[u(L,{icon:l},null,8,["icon"])]),_:2},1032,["class","onClick"]))),128))])])]),_:1},512)]),_:1})):y("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});const ve=le(me,[["__scopeId","data-v-63b13f00"]]);export{ve as default};
