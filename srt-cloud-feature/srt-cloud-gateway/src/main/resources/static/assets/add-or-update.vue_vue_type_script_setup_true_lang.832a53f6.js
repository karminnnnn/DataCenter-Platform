import{d as U,h as m,X as L,r as s,o as O,f as S,w as a,b as l,a1 as q,a as d,l as b,al as J,E as D}from"./index.afa5927e.js";import{u as T,t as I,a as N}from"./clusterConfiguration.a70377a4.js";const z=d("span",{style:{"font-size":"17px"}},[d("b",null,"Hadoop \u914D\u7F6E")],-1),$=d("span",{style:{"font-size":"17px"}},[d("b",null,"Flink \u914D\u7F6E")],-1),H=d("span",{style:{"font-size":"16px"}},[d("b",null,"\u81EA\u5B9A\u4E49\u914D\u7F6E")],-1),R=d("span",{style:{"font-size":"17px"}},[d("b",null,"\u57FA\u672C\u914D\u7F6E")],-1),j=b("\u53D6\u6D88"),K=b("\u6D4B\u8BD5"),M=b("\u786E\u5B9A"),W=U({__name:"add-or-update",emits:["refreshDataList"],setup(X,{expose:C,emit:g}){const r=m(!1),p=m(),E=m([]),u=L({orgId:"",type:"",hadoopConfigPath:"",flinkLibPath:"",flinkConfigPath:"","taskmanager.numberOfTaskSlots":1,"state.savepoints.dir":"","state.checkpoints.dir":"",name:"",alias:"",note:"",enabled:!0,configJson:""}),c=o=>{r.value=!0,u.id="",p.value&&p.value.resetFields(),J().then(e=>{E.value=e.data}),o&&_(o)},_=o=>{T(o).then(e=>{Object.assign(u,JSON.parse(e.data.configJson)),Object.assign(u,e.data)})},V=m({orgId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],hadoopConfigPath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],flinkLibPath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],flinkConfigPath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],alias:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],enabled:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),A=()=>{p.value.validate(o=>{if(!o)return!1;k(),I(u).then(()=>{D.success({message:"\u6D4B\u8BD5\u8FDE\u63A5\u6210\u529F",duration:500,onClose:()=>{g("refreshDataList")}})})})},h=()=>{p.value.validate(o=>{if(!o)return!1;k(),N(u).then(()=>{D.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{r.value=!1,g("refreshDataList")}})})})},k=()=>{let o={};o.hadoopConfigPath=u.hadoopConfigPath,o.flinkLibPath=u.flinkLibPath,o.flinkConfigPath=u.flinkConfigPath,o["taskmanager.numberOfTaskSlots"]=u["taskmanager.numberOfTaskSlots"],o["state.savepoints.dir"]=u["state.savepoints.dir"],o["state.checkpoints.dir"]=u["state.checkpoints.dir"],u.configJson=JSON.stringify(o)};return C({init:c}),(o,e)=>{const v=s("el-tree-select"),n=s("el-form-item"),B=s("fast-select"),f=s("el-divider"),i=s("el-input"),y=s("el-input-number"),P=s("el-switch"),w=s("el-form"),F=s("el-button"),x=s("el-dialog");return O(),S(x,{modelValue:r.value,"onUpdate:modelValue":e[16]||(e[16]=t=>r.value=t),title:u.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1},{footer:a(()=>[l(F,{onClick:e[13]||(e[13]=t=>r.value=!1)},{default:a(()=>[j]),_:1}),l(F,{type:"primary",onClick:e[14]||(e[14]=t=>A())},{default:a(()=>[K]),_:1}),l(F,{type:"primary",onClick:e[15]||(e[15]=t=>h())},{default:a(()=>[M]),_:1})]),default:a(()=>[l(w,{ref_key:"dataFormRef",ref:p,model:u,rules:V.value,"label-width":"100px",onKeyup:e[12]||(e[12]=q(t=>h(),["enter"]))},{default:a(()=>[l(n,{prop:"orgId",label:"\u6240\u5C5E\u673A\u6784","label-width":"auto"},{default:a(()=>[l(v,{clearable:"",modelValue:u.orgId,"onUpdate:modelValue":e[0]||(e[0]=t=>u.orgId=t),data:E.value,"check-strictly":"","value-key":"id",props:{label:"name",children:"children"},style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),l(n,{label:"\u7C7B\u578B",prop:"type","label-width":"auto"},{default:a(()=>[l(B,{modelValue:u.type,"onUpdate:modelValue":e[1]||(e[1]=t=>u.type=t),"dict-type":"production_cluster_configuration_type",placeholder:"\u8BF7\u9009\u62E9",clearable:""},null,8,["modelValue"])]),_:1}),l(f,null,{default:a(()=>[z]),_:1}),l(n,{label:"Hadoop \u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84",prop:"hadoopConfigPath","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.hadoopConfigPath,"onUpdate:modelValue":e[2]||(e[2]=t=>u.hadoopConfigPath=t),placeholder:"\u6307\u5B9A\u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84\uFF08\u672B\u5C3E\u65E0/\uFF09,\u9700\u8981\u5305\u542B\u4EE5\u4E0B\u6587\u4EF6\uFF1Acore-site.xml,hdfs-site.xml,yarn-site.xml !"},null,8,["modelValue"])]),_:1}),l(f,null,{default:a(()=>[$]),_:1}),l(n,{label:"lib \u8DEF\u5F84",prop:"flinkLibPath","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.flinkLibPath,"onUpdate:modelValue":e[3]||(e[3]=t=>u.flinkLibPath=t),placeholder:"\u6307\u5B9A lib \u7684 hdfs \u8DEF\u5F84\uFF08\u672B\u5C3E\u65E0/\uFF09,\u9700\u8981\u5305\u542B Flink \u8FD0\u884C\u65F6\u7684\u4F9D\u8D56, \u5982 hdfs://192.168.40.135:9000/flinkJar"},null,8,["modelValue"])]),_:1}),l(n,{label:"Flink \u914D\u7F6E\u6587\u4EF6\u8DEF\u5F84",prop:"flinkConfigPath","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.flinkConfigPath,"onUpdate:modelValue":e[4]||(e[4]=t=>u.flinkConfigPath=t),placeholder:"\u8BF7\u8F93\u5165 flink-conf.yaml \u6240\u5728\u7684\u8DEF\u5F84, \u5982 /server/deployment/flink-1.14.3/conf !"},null,8,["modelValue"])]),_:1}),l(f,{"content-position":"left"},{default:a(()=>[H]),_:1}),l(n,{label:"taskmanager.numberOfTaskSlots",prop:"taskmanager.numberOfTaskSlots","label-width":"auto"},{default:a(()=>[l(y,{modelValue:u["taskmanager.numberOfTaskSlots"],"onUpdate:modelValue":e[5]||(e[5]=t=>u["taskmanager.numberOfTaskSlots"]=t),min:1,max:10},null,8,["modelValue"])]),_:1}),l(n,{label:"state.savepoints.dir",prop:"state.savepoints.dir","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u["state.savepoints.dir"],"onUpdate:modelValue":e[6]||(e[6]=t=>u["state.savepoints.dir"]=t),placeholder:"\u5982 hdfs://192.168.40.135:9000/savepoints"},null,8,["modelValue"])]),_:1}),l(n,{label:"state.checkpoints.dir",prop:"state.checkpoints.dir","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u["state.checkpoints.dir"],"onUpdate:modelValue":e[7]||(e[7]=t=>u["state.checkpoints.dir"]=t),placeholder:"\u5982 hdfs://192.168.40.135:9000/checkpoints"},null,8,["modelValue"])]),_:1}),l(f,null,{default:a(()=>[R]),_:1}),l(n,{label:"\u96C6\u7FA4\u914D\u7F6E\u540D\u79F0",prop:"name","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.name,"onUpdate:modelValue":e[8]||(e[8]=t=>u.name=t),placeholder:"\u96C6\u7FA4\u914D\u7F6E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u522B\u540D",prop:"alias","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.alias,"onUpdate:modelValue":e[9]||(e[9]=t=>u.alias=t),placeholder:"\u522B\u540D"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u5907\u6CE8",prop:"note","label-width":"auto"},{default:a(()=>[l(i,{modelValue:u.note,"onUpdate:modelValue":e[10]||(e[10]=t=>u.note=t),placeholder:"\u5907\u6CE8"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u542F\u7528",prop:"enabled","label-width":"auto"},{default:a(()=>[l(P,{modelValue:u.enabled,"onUpdate:modelValue":e[11]||(e[11]=t=>u.enabled=t),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{W as _};
