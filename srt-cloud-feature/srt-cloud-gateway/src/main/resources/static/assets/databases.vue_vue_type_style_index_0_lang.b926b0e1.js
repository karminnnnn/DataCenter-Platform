import{d as ue,h as u,O as ie,X as de,K as re,r as n,o as y,c as $,b as e,w as l,a as s,F as q,e as ce,f as pe,a6 as B,a7 as F,k as b,t as d,l as r,ac as O,s as P,v as _e}from"./index.afa5927e.js";import{c as fe,d as be,l as me,g as he}from"./database.e836db09.js";import{_ as ge}from"./database.235d7a89.js";import{_ as Ce}from"./table.e1c1b00a.js";import{_ as V}from"./readonly-studio.vue_vue_type_script_setup_true_lang.c5082512.js";import{_ as De}from"./add-or-update.vue_vue_type_script_setup_true_lang.0e6432a4.js";const ve=s("br",null,null,-1),Le=s("br",null,null,-1),Ee=s("br",null,null,-1),Se=s("br",null,null,-1),ke=s("br",null,null,-1),xe=s("br",null,null,-1),ye={class:"custom-tree-node"},Be=["src"],Fe=["src"],Ve={style:{"margin-left":"8px"}},we=r("******"),Re={class:"custom-tabs-label"},Te=s("span",null,"\u5B57\u6BB5\u4FE1\u606F",-1),Ne={class:"custom-tabs-label"},Ae=s("span",null,"SQL \u751F\u6210",-1),Ie=r("\u67E5\u770B"),Xe=ue({__name:"databases",setup(Qe){const g=u(),w=u([]),D=u(""),R=u(),v=u(!1),L=u(!1),c=u({}),T=u([]),N=u(),A=u(),I=u();ie(D,a=>{R.value.filter(a)});const E=u([]),i=de({optionCardShow:!1,optionCardX:0,optionCardY:0,optionData:{},node:"",tree:""}),Q=u(),X=()=>{Q.value.init()},Y=()=>{S()},S=()=>{fe().then(a=>{w.value=a.data,E.value=[]})};re(()=>{S()});const j=(a,t)=>a?t.label.includes(a)||t.label.includes(a.toUpperCase())||t.label.includes(a.toLowerCase())||t.description&&t.description.includes(a)||t.description&&t.description.includes(a.toUpperCase())||t.description&&t.description.includes(a.toLowerCase()):!0,G=a=>{!a||be(a).then(t=>{E.value=t.data})},K=()=>{let a=i.optionData;console.log(a),k(),a.ifLeaf?(c.value=a.attributes,v.value=!0):(L.value=!0,me(g.value,a.label).then(t=>{T.value=t.data}),he(g.value,a.label,a.description).then(t=>{N.value.setEditorValue(t.data.flinkSqlCreate),A.value.setEditorValue(t.data.sqlCreate),I.value.setEditorValue(t.data.sqlSelect)}))},M=(a,t,C,f)=>{i.optionCardShow=!1,i.optionCardX=a.x,i.optionCardY=a.y,i.optionData=t,i.node=C,i.tree=f,i.optionCardShow=!0},H=(a,t,C,f)=>{k()},k=a=>{var t=document.getElementById("option-button-group");t&&(i.optionCardShow=!1)};return(a,t)=>{const C=n("Plus"),f=n("el-icon"),x=n("el-button"),J=n("RefreshLeft"),W=n("el-option"),Z=n("el-select"),ee=n("el-input"),te=n("el-tree"),le=n("el-scrollbar"),p=n("el-descriptions-item"),ae=n("el-descriptions"),z=n("el-dialog"),ne=n("Document"),_=n("el-table-column"),oe=n("el-table"),m=n("el-tab-pane"),se=n("DataLine"),U=n("el-tabs");return y(),$(q,null,[e(le,null,{default:l(()=>[s("div",{class:"databases",onClick:t[4]||(t[4]=o=>k())},[e(x,{onClick:t[0]||(t[0]=o=>X())},{default:l(()=>[e(f,null,{default:l(()=>[e(C)]),_:1})]),_:1}),e(x,{onClick:t[1]||(t[1]=o=>Y())},{default:l(()=>[e(f,null,{default:l(()=>[e(J)]),_:1})]),_:1}),ve,Le,e(Z,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o),onChange:G,clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[(y(!0),$(q,null,ce(w.value,(o,h)=>(y(),pe(W,{key:o.id,label:`[${o.id}]${o.name}`,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ee,Se,e(ee,{modelValue:D.value,"onUpdate:modelValue":t[3]||(t[3]=o=>D.value=o),placeholder:"search"},null,8,["modelValue"]),ke,xe,e(te,{ref_key:"databaseTreeRef",ref:R,data:E.value,"default-expand-all":"",onNodeContextmenu:M,onNodeClick:H,"node-key":"id","filter-node-method":j},{default:l(({node:o,data:h})=>[s("span",ye,[B(s("img",{src:b(ge)},null,8,Be),[[F,h.ifLeaf=="1"]]),B(s("img",{src:b(Ce)},null,8,Fe),[[F,h.ifLeaf=="0"]]),s("span",Ve,d(h.label)+"\u2003"+d(h.description),1)])]),_:1},8,["data"])])]),_:1}),e(z,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=o=>v.value=o),title:"\u8BE6\u60C5"},{default:l(()=>[e(ae,{size:"default",column:1,"label-class-name":"el-descriptions-item-label-class",border:""},{default:l(()=>[e(p,{label:"\u540D\u79F0"},{default:l(()=>[r(d(c.value.name),1)]),_:1}),e(p,{label:"\u6570\u636E\u5E93\u7C7B\u578B"},{default:l(()=>[r(d(b(O)(b(P).appStore.dictList,"database_type",c.value.databaseType)),1)]),_:1}),e(p,{label:"\u5E93\u540D"},{default:l(()=>[r(d(c.value.databaseName),1)]),_:1}),e(p,{label:"IP\u5730\u5740"},{default:l(()=>[r(d(c.value.databaseIp),1)]),_:1}),e(p,{label:"\u7AEF\u53E3"},{default:l(()=>[r(d(c.value.databasePort),1)]),_:1}),e(p,{label:"\u72B6\u6001"},{default:l(()=>[r(d(b(O)(b(P).appStore.dictList,"database_status",c.value.status)),1)]),_:1}),e(p,{label:"\u7528\u6237\u540D"},{default:l(()=>[r(d(c.value.userName),1)]),_:1}),e(p,{label:"\u5BC6\u7801"},{default:l(()=>[we]),_:1}),e(p,{label:"jdbc\u8FDE\u63A5\u4E32"},{default:l(()=>[r(d(c.value.jdbcUrl),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:L.value,"onUpdate:modelValue":t[6]||(t[6]=o=>L.value=o),title:"\u8BE6\u60C5",width:"65%"},{default:l(()=>[e(U,{class:"table-tabs"},{default:l(()=>[e(m,null,{label:l(()=>[s("span",Re,[e(f,null,{default:l(()=>[e(ne)]),_:1}),Te])]),default:l(()=>[e(oe,{data:T.value,height:"500",style:{width:"100%"}},{default:l(()=>[e(_,{prop:"fieldName",label:"\u540D\u79F0","header-align":"center",align:"center"}),e(_,{prop:"remarks",label:"\u6CE8\u91CA","header-align":"center",align:"center"}),e(_,{prop:"fieldTypeName",label:"\u7C7B\u578B","header-align":"center",align:"center"}),e(_,{prop:"displaySize",label:"\u957F\u5EA6","header-align":"center",align:"center"}),e(_,{prop:"scaleSize",label:"\u5C0F\u6570\u4F4D\u6570","header-align":"center",align:"center"}),e(_,{prop:"defaultValue",label:"\u9ED8\u8BA4\u503C","header-align":"center",align:"center"}),e(_,{prop:"pk",label:"\u662F\u5426\u4E3B\u952E","header-align":"center",align:"center"}),e(_,{prop:"autoIncrement",label:"\u662F\u5426\u9012\u589E","header-align":"center",align:"center"}),e(_,{prop:"nullable",label:"\u662F\u5426\u53EF\u4E3A\u7A7A","header-align":"center",align:"center"})]),_:1},8,["data"])]),_:1}),e(m,null,{label:l(()=>[s("span",Ne,[e(f,null,{default:l(()=>[e(se)]),_:1}),Ae])]),default:l(()=>[e(U,{"tab-position":"left",style:{height:"500px"},class:"sql-tabs"},{default:l(()=>[e(m,{label:"Flink DDL"},{default:l(()=>[e(V,{id:"FlinkDDL",ref_key:"FlinkDDLRef",ref:N,style:{height:"500px","font-size":"16px"}},null,512)]),_:1}),e(m,{label:"SQL DDL"},{default:l(()=>[e(V,{id:"SQLDDL",ref_key:"SQLDDLRef",ref:A,style:{height:"500px","font-size":"16px"}},null,512)]),_:1}),e(m,{label:"SQL SELECT"},{default:l(()=>[e(V,{id:"SQLSELECT",ref_key:"SQLSELECTRef",ref:I,style:{height:"500px","font-size":"16px"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(s("div",{style:_e({"z-index":9999,position:"fixed",left:i.optionCardX+"px",top:i.optionCardY+"px",width:"100px",background:"white","box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}),id:"option-button-group"},[e(x,{onClick:K,class:"option-card-button"},{default:l(()=>[Ie]),_:1})],4),[[F,i.optionCardShow]]),e(De,{ref_key:"addDatabaseRef",ref:Q,onRefreshDataList:S},null,512)],64)}}});export{Xe as _};
