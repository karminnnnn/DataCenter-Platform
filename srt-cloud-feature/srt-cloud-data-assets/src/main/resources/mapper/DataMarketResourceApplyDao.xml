<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.srt.dao.DataMarketResourceApplyDao">


    <select id="getList" resultType="net.srt.entity.DataMarketResourceApplyEntity">
        SELECT dmra.*,darm.mount_name AS resource_mount_name,dar.name AS resource_name FROM data_market_resource_apply dmra
        INNER JOIN data_assets_resource_mount darm ON dmra.resource_mount_id=darm.id
        INNER JOIN data_assets_resource dar ON dmra.resource_id=dar.id
        WHERE dmra.deleted=0
        <if test="resourceId != null">
            and dmra.resource_id=#{resourceId}
        </if>
        <if test="resourceName != null and resourceName.trim() != ''">
            and dar.name LIKE "%"#{resourceName}"%"
        </if>
        <if test="resourceMountName != null and resourceMountName.trim() != ''">
            and darm.mount_name LIKE "%"#{resourceMountName}"%"
        </if>
        <if test="mountType != null">
            and dmra.mount_type=#{mountType}
        </if>
        <if test="applyStartTime != null">
            and dmra.apply_start_time<![CDATA[>=]]>#{applyStartTime}
        </if>
        <if test="applyEndTime != null">
            and dmra.apply_end_time<![CDATA[<=]]>#{applyEndTime}
        </if>
        <if test="status != null">
            and dmra.status=#{status}
        </if>
        <if test="ifAuth != null">
            and dmra.if_auth=#{ifAuth}
        </if>
        <if test="creator != null">
            and dmra.creator=#{creator}
        </if>
        <if test="projectId != null">
            and dmra.project_id=#{projectId}
        </if>
        ORDER BY dmra.id DESC
    </select>
</mapper>
